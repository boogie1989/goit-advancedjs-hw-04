{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '3632143-ebeee10190d206f1a5cb99fa1';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet currentPage = 1;\nconst perPage = 15;\n\nexport function searchImages(query) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query.trim(),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page: currentPage,\n  });\n\n  currentPage += 1;\n\n  return axios.get(`${BASE_URL}?${params}`);\n}\n\nexport function resetPage() {\n  currentPage = 1;\n}\n\nexport function getPerPage() {\n  return perPage;\n}\n","import simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightboxImages = new simpleLightbox('.images-list a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function showImages(images) {\n  const imagesList = document.querySelector('.images-list');\n  imagesList.classList.remove('hidden');\n\n  const imagesHTML = images.data.hits\n    .map(\n      img => `\n      <li class=\"images-item\">\n        <a class=\"images-link\" href=\"${img.largeImageURL}\" onclick=\"return false\">\n          <img\n            class=\"image\"\n            src=\"${img.webformatURL}\"\n            alt=\"${img.tags}\"\n          />\n        </a>\n        <div class=\"image-statistics\">\n          <ul class=\"stat-list stat-titles-list\">\n            <li class=\"stat-titles-item\">\n              <span class=\"stat-title\">Likes</span>\n              <span class=\"stat-value\">${img.likes}</span>\n            </li>\n            <li class=\"stat-titles-item\">\n              <span class=\"stat-title\">Views</span>\n              <span class=\"stat-value\">${img.views}</span>\n            </li>\n            <li class=\"stat-titles-item\">\n              <span class=\"stat-title\">Comments</span>\n              <span class=\"stat-value\">${img.comments}</span>\n            </li>\n            <li class=\"stat-titles-item\">\n              <span class=\"stat-title\">Downloads</span>\n              <span class=\"stat-value\">${img.downloads}</span>\n            </li>\n          </ul>\n        </div>\n      </li>\n    `\n    )\n    .join('');\n\n  imagesList.insertAdjacentHTML('beforeend', imagesHTML);\n  lightboxImages.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPerPage, resetPage, searchImages } from './js/pixabay-api';\nimport { showImages } from './js/render-functions';\n\nconst formElem = document.querySelector('form');\nconst btnLoadMore = document.querySelector('.btn-load-mode');\nconst loader = document.querySelector('.loader');\nconst endLine = document.querySelector('.end-line');\nlet searchQuery = '';\n\nconst showToastError = message => {\n  iziToast.error({\n    class: 'error-alert',\n    message,\n    messageColor: 'white',\n    position: 'topRight',\n    maxWidth: 432,\n  });\n};\n\nconst handleImageSearch = async () => {\n  const imagesList = document.querySelector('.images-list');\n  imagesList.classList.add('hidden');\n  imagesList.innerHTML = '';\n  loader.classList.remove('hidden');\n  endLine.classList.add('hidden');\n  btnLoadMore.classList.add('hidden');\n  resetPage();\n\n  const images = await searchImages(searchQuery);\n  loader.classList.add('hidden');\n\n  if (!images.data.hits.length) {\n    showToastError(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n  } else {\n    showImages(images);\n    btnLoadMore.classList.remove('hidden');\n  }\n};\n\nformElem.addEventListener('submit', async event => {\n  event.preventDefault();\n  searchQuery = event.target.elements.query.value.trim();\n\n  if (searchQuery) {\n    await handleImageSearch();\n  } else {\n    showToastError('Search query is empty');\n  }\n});\n\nbtnLoadMore.addEventListener('click', async () => {\n  if (searchQuery) {\n    loader.classList.remove('hidden');\n    endLine.classList.add('hidden');\n    btnLoadMore.classList.add('hidden');\n\n    const images = await searchImages(searchQuery);\n    loader.classList.add('hidden');\n\n    if (!images.data.hits.length) {\n      showToastError('Sorry, there are no images any more!');\n    } else {\n      showImages(images);\n\n      if (images.data.hits.length < getPerPage()) {\n        btnLoadMore.classList.add('hidden');\n        endLine.classList.remove('hidden');\n      } else {\n        btnLoadMore.classList.remove('hidden');\n      }\n\n      const h = document\n        .querySelector('.images-item')\n        .getBoundingClientRect().height;\n      window.scrollBy({\n        top: 2 * h,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }\n  } else {\n    showToastError('Search query is empty');\n  }\n});\n"],"names":["API_KEY","BASE_URL","currentPage","perPage","searchImages","query","params","axios","resetPage","getPerPage","lightboxImages","simpleLightbox","showImages","images","imagesList","imagesHTML","img","formElem","btnLoadMore","loader","endLine","searchQuery","showToastError","message","iziToast","handleImageSearch","event","h"],"mappings":"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"}